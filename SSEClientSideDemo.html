<!DOCTYPE html>
<html>
  <head>
    <title>SSE Demo</title>
    <meta charset="utf-8" />
  </head>
  <body>
    <div id="app"></div>
    <div id="table">
      <table>
        <tr>
          <th>Ticker</th>
          <th>Name</th>
          <th>Last Trade Price</th>
          <th>Last Trade Volume</th>
          <th>Visualization</th>
        </tr>
      </table>
    </div>
    <script src="react/react.js"></script>
    <script src="react/react-dom.js"></script>
    <script src="react/babel.min.js"></script>
    <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.28.4/babel.js" integrity="sha512-tAxtuVSKZzhVD+PZrFAkFx3G7mrYVPYmsMVc8HH2zWL58f34RfTt218zJGbHu1XCycSlEa0tcLNhwXEy5x1O1A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script> -->
    <script type="text/babel">

      const useState = React.useState;
      const useEffect = React.useEffect;
      
      function App() {
	      const [time, setTime] = useState('');
	      useEffect(() => {
        const eventSource = new EventSource('http://localhost:31415/events');
        eventSource.onmessage = (event) => {
		    const data = JSON.parse(event.data);
		    setTime(data.time);
        };
        return () => eventSource.close();
	      }, []);
	      return (
		    <div>
		    <h1>Server-Sent Events Demo</h1>
		    <p>Current Time: {time}</p>
		    </div>
	    );
      console.log(data);
      }
      ReactDOM.render(
        <App />,
	      document.getElementById('app'));
    </script>
  </body>
</html>
